<div class="container flex items-center justify-center bg-slate-100">
  <div class="flex flex-col gap-4">
    <p-card
      class="relative"
      [header]="formType() === 'sign-up' ? 'Sign up' : 'Sign in'"
    >
      <ng-template #subtitle>
        {{ formType() === "sign-up" ? "Create a new account" : "Welcome back" }}
      </ng-template>
      <form [formGroup]="form">
        <div class="flex flex-col gap-2 my-3">
          <div class="flex flex-col gap-1">
            <label for="username">Username</label>
            <input
              pInputText
              id="username"
              placeholder="John_123"
              formControlName="username"
            />
            @if (form.controls.username.hasError("minlength")) {
              <small class="text-red-500">Username is too short</small>
            }
          </div>
          <div class="flex flex-col gap-1">
            <label for="password">Password</label>
            <input
              pInputText
              id="password"
              type="password"
              placeholder="●●●●"
              formControlName="password"
            />
            @if (form.controls.password.hasError("minlength")) {
              <small class="text-red-500">Password is too short</small>
            }
          </div>
          @if (formType() === "sign-up") {
            <div class="flex flex-col gap-1">
              <label for="repeat">Repeat password</label>
              <input
                pInputText
                id="repeat"
                type="password"
                placeholder="●●●●"
                formControlName="repeat"
              />
            </div>
            @if (form.hasError("passwordMismatch")) {
              <small class="text-red-500">Passwords don't match</small>
            }
          }
        </div>
      </form>
      <ng-template #footer>
        <div class="mt-2">
          @if (formType() === "sign-up") {
            <p-button
              label="Sign up"
              (onClick)="onSignUp()"
              [disabled]="!submitEnabled()"
            />
          } @else if (formType() === "sign-in") {
            <p-button
              severity="success"
              label="Sign in"
              (onClick)="onSignIn()"
              [disabled]="!submitEnabled()"
            />
          }
        </div>
      </ng-template>
    </p-card>
    <div class="flex justify-center underline text-primary">
      @if (formType() === "sign-up") {
        <a [routerLink]="'.'" [queryParams]="{ type: 'sign-in' }"
          >Already have an account?</a
        >
      } @else if (formType() === "sign-in") {
        <a [routerLink]="'.'" [queryParams]="{ type: 'sign-up' }"
          >Don't have an account?</a
        >
      }
    </div>
  </div>
</div>
